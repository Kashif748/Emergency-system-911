<div *ngIf="state$ | async" class="row">
  <div class="p-col-4">
    <header class="py-4 d-flex">
      <h4 class="text-info p-text-bold mb-0 mx-2">
        {{ "ORG_ARTCH" | translate }}
      </h4>
      <p-chip
        *ngIf="org$ | async as org"
        label=" {{ org | translateObj }}"
        icon="pi pi-home"
      ></p-chip>
    </header>
    <p-tree
      [value]="orgHir"
      [loading]="loading$ | async"
      (onNodeSelect)="selectNode($event?.node)"
      (onNodeExpand)="nodeExpand($event?.node)"
      (onFilter)="loadPage($event?.filter)"
      [selectionMode]="'single'"
      [draggableNodes]="true"
      [droppableNodes]="true"
      (onNodeDrop)="onDrop($event)"
      draggableScope="self"
      droppableScope="self"
      filter="true"
      [styleClass]="'min-h-500px'"
    >
      <ng-template let-node pTemplate="default">
        <div>
          <a class="px-2" *ngIf="node.leaf">
            {{ node.label | translate }}
          </a>
          <div class="p-2" *ngIf="!node.leaf">
            {{ node.data | translateObj }}
          </div>
        </div>
      </ng-template>

      <ng-template pTemplate="empty">
        <ng-container *ngIf="loading$ | async; else elseTemplate">
          <div class="empty-node text-center">
            {{ "ACTIONS.LOADING" | translate }}
          </div>
        </ng-container>
        <ng-template #elseTemplate>
          <div class="empty-node text-center">
            {{ "NO_DATA" | translate }}
          </div>
        </ng-template>
      </ng-template>
    </p-tree>
  </div>
  <div class="p-col-8">
    <app-org-hierarchy-form></app-org-hierarchy-form>
  </div>
</div>
