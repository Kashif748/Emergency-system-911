<!-- <div class="container-fluid">
  <img class="img-fluid w-100" src="assets/images/private-position.jpeg" alt="">
</div> -->

<div class="container-fluid">
  <div class="row mb-2">
    <div class="col-md-12" [dir]="lang == 'ar' ? 'rtl' : 'ltr'">
      <button
        mat-raised-button
        class="primary button"
        (click)="openAlertDialog()"
      >
        {{ "INCIDENTS.CHANGE_INCIDENT" | translate }}
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col-md-2">
      <div class="card" [dir]="lang == 'ar' ? 'rtl' : 'ltr'">
        <span class="text-dark-75 p-3 font-weight-bolder m-1"
          >{{ "PRIVATE_POSITION.HOSPITAL_DATA" | translate }}
        </span>
        <div id="chartStck" *ngIf="chartOptions7">
          <apx-chart
            [series]="chartOptions7.series"
            [chart]="chartOptions7.chart"
            [fill]="chartOptions7.fill"
            [xaxis]="chartOptions7.xaxis"
            [yaxis]="chartOptions7.yaxis"
            [legend]="chartOptions5.legend"
            [plotOptions]="chartOptions7.plotOptions"
          ></apx-chart>
        </div>
      </div>
      <div class="card" [dir]="lang == 'ar' ? 'rtl' : 'ltr'">
        <span class="text-dark-75 p-3 font-weight-bolder m-1"
          >{{ "PRIVATE_POSITION.STATS_AND_INFO" | translate }}
          {{ "INCIDENTS.DATA" | translate }}</span
        >
        <div id="chartLine" *ngIf="chartOptions8">
          <apx-chart
            [series]="chartOptions8.series"
            [chart]="chartOptions8.chart"
            [stroke]="chartOptions8.stroke"
            [title]="chartOptions8.title"
            [xaxis]="chartOptions8.xaxis"
            [yaxis]="chartOptions8.yaxis"
            [grid]="chartOptions8.grid"
            [legend]="chartOptions5.legend"
            [fill]="chartOptions8.fill"
          ></apx-chart>
        </div>
      </div>
      <div class="card" [dir]="lang == 'ar' ? 'rtl' : 'ltr'">
        <span class="text-dark-75 p-3 font-weight-bolder m-1">{{
          "PRIVATE_POSITION.GENDER_SPECIFIC_DATA" | translate
        }}</span>
        <div id="chartHorbar" *ngIf="chartOptions5">
          <apx-chart
            [series]="chartOptions5.series"
            [chart]="chartOptions5.chart"
            [dataLabels]="chartOptions5.dataLabels"
            [plotOptions]="chartOptions5.plotOptions"
            [xaxis]="chartOptions5.xaxis"
            [yaxis]="chartOptions5.yaxis"
            [stroke]="chartOptions5.stroke"
            [grid]="chartOptions5.grid"
            [fill]="chartOptions5.fill"
            [legend]="chartOptions5.legend"
          ></apx-chart>
        </div>
      </div>
      <div class="card" [dir]="lang == 'ar' ? 'rtl' : 'ltr'">
        <span class="text-dark-75 p-3 font-weight-bolder m-1"
          >{{ "PRIVATE_POSITION.NO_OF_INJURIES" | translate }}
        </span>
        <div id="chartArea" *ngIf="chartOptions6">
          <apx-chart
            [series]="chartOptions6.series"
            [chart]="chartOptions6.chart"
            [xaxis]="chartOptions6.xaxis"
            [yaxis]="chartOptions6.yaxis"
            [stroke]="chartOptions6.stroke"
            [tooltip]="chartOptions6.tooltip"
            [grid]="chartOptions6.grid"
            [fill]="chartOptions6.fill"
            [dataLabels]="chartOptions6.dataLabels"
          ></apx-chart>
        </div>
      </div>
    </div>

    <div class="col-md-10">
      <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="col-md-2 mt-2 item pt-0">
              <div class="card" style="min-height: 130px">
                <span class="text-dark-75 font-weight-bolder m-1">{{
                  "PRIVATE_POSITION.BUDGET" | translate
                }}</span>
                <div class="scroll" style="max-height: 100px">
                  <div
                    id="chartRadi"
                    style="margin-top: 10px"
                    *ngIf="chartOptions9"
                  >
                    <apx-chart
                      [series]="chartOptions9.series"
                      [chart]="chartOptions9.chart"
                      [plotOptions]="chartOptions9.plotOptions"
                      [labels]="chartOptions9.labels"
                      [fill]="chartOptions9.fill"
                      [title]="chartOptions9.title"
                      [stroke]="chartOptions9.stroke"
                    >
                    </apx-chart>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-2 mt-2 item pt-0">
              <div class="card card-custom m-0 p-4" style="min-height: 130px">
                <div class="scroll">
                  <div class="font-weight-bold text-muted font-size-sm">
                    <span class="text-dark-75 font-weight-bolder mr-2"
                      >{{ (stats ? stats.major : 0) | number: "1.0-2" }}%</span
                    >{{ "INCIDENTS.SERIOUS_INJURIES" | translate }}
                  </div>
                  <div class="progress progress-xs mt-1 mb-1 bg-transparent">
                    <div
                      class="progress-bar bg-success"
                      role="progressbar"
                      style="
                        width: 67%;
                        color: #8950fc;
                        background-color: #8950fc !important;
                      "
                      aria-valuenow="50"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    ></div>
                  </div>

                  <div class="font-weight-bold text-muted font-size-sm">
                    <span class="text-dark-75 font-weight-bolder mr-2"
                      >{{ (stats ? stats.normal : 0) | number: "1.0-2" }}%</span
                    >{{ "INCIDENTS.NORMAL_INJURIES" | translate }}
                  </div>
                  <div class="progress progress-xs mt-1 mb-1 bg-transparent">
                    <div
                      class="progress-bar bg-success"
                      role="progressbar"
                      style="width: 39%"
                      aria-valuenow="50"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    ></div>
                  </div>

                  <div class="font-weight-bold text-muted font-size-sm">
                    <span class="text-dark-75 font-weight-bolder mr-2"
                      >{{ (stats ? stats.minor : 0) | number: "1.0-2" }}%</span
                    >{{ "INCIDENTS.MINOR_INJURIES" | translate }}
                  </div>
                  <div class="progress progress-xs mt-1 mb-1 bg-transparent">
                    <div
                      class="progress-bar"
                      role="progressbar"
                      style="width: 21%"
                      aria-valuenow="0"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    ></div>
                  </div>
                </div>
                <!-- <div class="card-body p-2">
                    <span class="d-block font-size-h4 font-weight-bold text-warning">
                      Hospital Numbers
                    </span>
                    <span class="d-block  font-weight-normal text-warning">cases:
                    </span>
                    <span class="card-title font-weight-bolder text-warning  m-0 d-block number">76
                    </span>
                  </div> -->
              </div>
            </div>

            <div class="col-md-2 mt-2 item pt-0">
              <div
                class="card card-custom m-0 p-2"
                style="background-color: #403b9d8c; min-height: 130px"
              >
                <div class="card-body p-2">
                  <span
                    class="d-block font-weight-bolder text-white"
                    style="font-size: 12px"
                  >
                    <i
                      class="fa fa-tasks"
                      style="color: white; font-size: small"
                    ></i>
                    &nbsp; {{ "PRIVATE_POSITION.SECONDARY_ORG" | translate }}
                  </span>

                  <div
                    class="mt-2 scrollbar-secondary overflow-auto px-2"
                    style="max-height: 80px; min-height: 80px"
                  >
                    <span
                      *ngFor="let item of Sorg"
                      class="
                        font-weight-500
                        label label-lg label-inline label-outline-white
                        m-1
                      "
                    >
                      {{
                        lang == "en"
                          ? item?.orgStructure?.nameEn
                          : item?.orgStructure?.nameAr
                      }}
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="row" style="margin: 0.7em">
                <div class="col-md-4 p-0">
                  <ul
                    class="nav nav-pills"
                    style="padding-right: 0px; padding-left: 0px"
                  >
                    <li class="nav-item" style="width: 100%">
                      <a
                        class="nav-link btn btn-warning text-center"
                        style="
                          color: white;
                          font-weight: bold;
                          justify-content: center;
                          padding: 15px;
                          font-size: 12px;
                        "
                      >
                        {{ "PRIVATE_POSITION.EMERGANCY_LEVELS" | translate }} :
                        {{ getLevelId(incidents?.emergencyLevel?.id) }}</a
                      >
                    </li>
                  </ul>
                </div>
                <div class="col-md-4 p-0">
                  <ul
                    class="nav nav-pills"
                    style="padding-right: 0px; padding-left: 0px"
                  >
                    <li class="nav-item" style="width: 100%">
                      <a
                        class="nav-link btn btn-success text-center"
                        style="
                          color: white;
                          font-weight: bold;
                          justify-content: center;
                          padding: 15px;
                          font-size: 12px;
                        "
                      >
                        {{ "PRIVATE_POSITION.CITY" | translate }} :
                        {{ getcityId(incidents?.city?.id) }}
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="col-md-4 p-0">
                  <ul
                    class="nav nav-pills"
                    style="padding-right: 0px; padding-left: 0px"
                  >
                    <li class="nav-item" style="width: 100%">
                      <a
                        class="nav-link btn btn-primary text-center"
                        style="
                          color: white;
                          font-weight: bold;
                          justify-content: center;
                          padding: 15px;
                          font-size: 12px;
                        "
                      >
                        {{ "PRIVATE_POSITION.DATE" | translate }} :
                        {{ incidents?.incidentDate | customDate | date: "yyyy/MM/dd" }}</a
                      >
                    </li>
                  </ul>
                </div>
              </div>
              <div class="row mt-4">
                <div class="col-md-12 pl-6 pr-6">
                  <input
                    style="height: 50px"
                    type="email"
                    disabled
                    class="form-control"
                    id="exampleInputEmail12"
                    aria-describedby="emailHelp"
                    placeholder="{{ 'INCIDENTS.SUB_CATEGORY' | translate }}"
                  />
                </div>
                <!-- <div class="col-md-6">
                  <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Local Entries">
                </div> -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-5">
        <div class="col-md-9">
          <div class="card new-te">
            <app-map [config]="mapConfig$ | async" [showLayers]="false"> </app-map>
          </div>

          <div class="row">
            <div class="col-md-6">
              <!-- <div class="card">
    
          <div
          class="card-body"
          style="align-items: center;"
        > -->
              <div class="scroll" style="max-height: 230px; line-height: 11px">
                <ul class="timeline d-inline">
                  <perfect-scrollbar (psYReachEnd)="_nextWorkLogPage()">
                    <li *ngFor="let item of workLogs$ | async">
                      <div class="timeline-badge">
                        <i class="fa fa-user" style="color: red"></i>
                      </div>
                      <div class="card timeline-panel">
                        <div class="card-body">
                          <div class="timeline-heading">
                            <h4 class="timeline-title">{{ item?.notes }}</h4>
                            <p class="p-0">
                              <small class="text-muted"
                                ><i class="glyphicon glyphicon-time"></i>
                                {{ item?.createdOn | customDate | date: "short" }}</small
                              >
                            </p>
                          </div>
                          <div class="timeline-body">
                            <p>
                              {{ "INCIDENTS.WORKLOG_DESCRIPTION" | translate }}
                            </p>
                          </div>
                        </div>
                      </div>
                    </li>
                  </perfect-scrollbar>

                  <!-- <li>
            <div class="timeline-badge"><i class="fa fa-user" style="color:red"></i></div>
            <div class=" card timeline-panel">
              <div class="card-body">
              <div class="timeline-heading">
                <h4 class="timeline-title">{{ "INCIDENTS.WORKLOGS" | translate }} 2</h4>
                <p class="p-0"><small class="text-muted"><i class="glyphicon glyphicon-time"></i> 5 {{ 'INCIDENTS.HOUR_AGO' | translate}}</small></p>
              </div>
              <div class="timeline-body">
                <p> {{ "INCIDENTS.WORKLOG_DESCRIPTION" | translate }} </p>
              </div>
            </div>
            </div>
          </li> -->
                </ul>
              </div>
              <!-- <ng-container #worklogContainer></ng-container> -->

              <!-- 
      
     -->
            </div>
            <div class="col-md-6">
              <div class="card">
                <div
                  class="card-body pt-3 pb-3 text-center"
                  style="align-items: center"
                >
                  <span class="text-dark-75 p-3 font-weight-bolder m-1">{{
                    "PRIVATE_POSITION.NO_OF_INJURIES" | translate
                  }}</span>
                  <div id="chartgrad" *ngIf="chartOptions4">
                    <apx-chart
                      [series]="chartOptions4.series"
                      [chart]="chartOptions4.chart"
                      [states]="chartOptions4.states"
                      [tooltip]="chartOptions4.tooltip"
                      [stroke]="chartOptions4.stroke"
                      [fill]="chartOptions4.fill"
                      [xaxis]="chartOptions4.xaxis"
                      [yaxis]="chartOptions4.yaxis"
                    >
                    </apx-chart>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="card">
            <div
              [dir]="lang == 'ar' ? 'rtl' : 'ltr'"
              class="card-body p-3 text-center d-flex"
              style="align-items: center"
            >
              <span class="fa-stack fa-2x">
                <i class="fa fa-circle fa-stack-2x icon-background"></i>
                <i class="fa fa-user fa-stack-1x" style="color: #419683"></i>
              </span>

              <div
                class="
                  d-flex
                  flex-column
                  align-items-center
                  justify-content-between
                  flex-grow-1
                  scroll
                "
                style="width: 100%"
              >
                <span
                  class="text-dark-75 font-weight-bolder mt-2 font-size-h4"
                ></span>
                <span class="text-success font-weight-bolder">{{
                  "PRIVATE_POSITION.DESCRIPTION" | translate
                }}</span>
                <span class="text-dark-75 font-weight-bolder">
                  {{ incidents?.description }}</span
                >
              </div>
            </div>

            <!-- <canvas baseChart [data]="assetsData" [labels]="assetsBarChartLabels" [options]="assetsBarChartOptions"
              [plugins]="assetsBarChartPlugins" [legend]="assetsBarChartLegend" [chartType]="assetsBarChartType">
            </canvas> -->
          </div>

          <div class="card scroll" style="max-height: 222px">
            <!-- <div id="chartbar">
                <apx-chart
                  [series]="chartOptions2.series"
                  [chart]="chartOptions2.chart"

                ></apx-chart>
              </div> -->

            <div class="card-body pt-7" [dir]="lang == 'ar' ? 'rtl' : 'ltr'">
              <span class="text-success font-weight-bolder mt-2">{{
                "PRIVATE_POSITION.CHALLENGES" | translate
              }}</span>

              <div class="panel-body mt-3">
                <ul id="mylist" class="list-group">
                  <ng-container *ngFor="let item of challenge">
                    <li id="item1" class="list-group-item font-weight-bold">
                      {{ "PRIVATE_POSITION.CHALLENGES" | translate }} -
                      {{ item.challenge }}
                      <div
                        class="circle"
                        [class]="lang == 'ar' ? 'float-left' : 'float-right'"
                      >
                        <div class="font-weight-bold">1</div>
                      </div>
                    </li>
                  </ng-container>
                  <!-- <li id="item2"  class="list-group-item font-weight-bold">
                        <span>{{ "INCIDENTS.CHALLENGES" | translate }} 2</span>

                      <div class="circle" [class]="lang == 'ar' ? 'float-left' : 'float-right'">
                        <div>1</div>
                      </div>
              
                      </li> -->
                </ul>
              </div>
            </div>
          </div>
          <div class="card">
            <div
              class="card-body text-center d-flex"
              style="align-items: center; padding: 3%"
            >
              <span class="svg-icon svg-icon-3x svg-icon-info my-2">
                <!--begin::Svg Icon | path:/metronic/theme/html/demo7/dist/assets/media/svg/icons/Media/Equalizer.svg-->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="24px"
                  height="24px"
                  viewBox="0 0 24 24"
                  version="1.1"
                >
                  <g
                    stroke="none"
                    stroke-width="1"
                    fill="none"
                    fill-rule="evenodd"
                  >
                    <rect x="0" y="0" width="24" height="24"></rect>
                    <rect
                      fill="#000000"
                      opacity="0.3"
                      x="13"
                      y="4"
                      width="3"
                      height="16"
                      rx="1.5"
                    ></rect>
                    <rect
                      fill="#000000"
                      x="8"
                      y="9"
                      width="3"
                      height="11"
                      rx="1.5"
                    ></rect>
                    <rect
                      fill="#000000"
                      x="18"
                      y="11"
                      width="3"
                      height="9"
                      rx="1.5"
                    ></rect>
                    <rect
                      fill="#000000"
                      x="3"
                      y="13"
                      width="3"
                      height="7"
                      rx="1.5"
                    ></rect>
                  </g>
                </svg>
                <!--end::Svg Icon-->
              </span>

              <div
                class="
                  d-flex
                  flex-column
                  align-items-center
                  justify-content-between
                  flex-grow-1
                "
              >
                <span class="text-info font-weight-bold">{{
                  "PRIVATE_POSITION.ASSETS" | translate
                }}</span>
                <span class="text-dark-75 font-weight-bolder font-size-h4"
                  >178,080</span
                >
              </div>
            </div>
          </div>

          <div class="card">
            <div
              class="card-body text-center d-flex"
              style="align-items: center"
            >
              <div id="chart-4" *ngIf="chartLineSparkline4Options">
                <apx-chart
                  [series]="chartLineSparkline4Options.series"
                  [chart]="commonLineSparklineOptions.chart"
                  [tooltip]="commonLineSparklineOptions.tooltip"
                  [colors]="chartLineSparkline4Options.colors"
                >
                </apx-chart>
              </div>

              <div
                class="
                  d-flex
                  m-3
                  flex-column
                  align-items-center
                  justify-content-between
                  flex-grow-1
                "
              >
                <span class="text-info font-weight-bold">{{
                  "PRIVATE_POSITION.EXPENSES" | translate
                }}</span>
                <span class="text-dark-75 font-weight-bolder font-size-h4"
                  >{{ "INCIDENTS.AED" | translate }} 178,080</span
                >
              </div>
              <!-- [title]="chartLineSparkline4Options.title" -->

              <!-- <span class="ct-chart line"></span> sparkline chart. </p> -->
            </div>
          </div>

          <div class="card">
            <div
              class="card-body text-center"
              style="align-items: center"
              *ngIf="chartAreaSparkline3Options"
            >
              <span class="text-dark-75 p-3 font-weight-bolder m-1"
                >{{ "EVENTSMODULES.incidentCategories" | translate }}
                {{ "INCIDENTS.DATA" | translate }}</span
              >
              <apx-chart
                #chartspark3
                [series]="chartAreaSparkline3Options.series"
                [chart]="commonAreaSparlineOptions.chart"
                [stroke]="chartAreaSparkline3Options.stroke"
                [yaxis]="commonAreaSparlineOptions.yaxis"
                [fill]="chartAreaSparkline3Options.fill"
              ></apx-chart>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
